updated changes 

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•

 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘
â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
 â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•   â•šâ•â•   â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•
```

### ğŸ©¸ *Connecting Lives. Saving Futures.*

**A futuristic full-stack blood donation portal â€” React 18 Â· Node.js Â· MongoDB**

---

[![React](https://img.shields.io/badge/React-18.3.1-61DAFB?style=for-the-badge&logo=react&logoColor=black)](https://react.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org)
[![Vite](https://img.shields.io/badge/Vite-6.3.5-646CFF?style=for-the-badge&logo=vite&logoColor=white)](https://vitejs.dev)
[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)](https://nodejs.org)
[![Express](https://img.shields.io/badge/Express-4.18-000000?style=for-the-badge&logo=express&logoColor=white)](https://expressjs.com)
[![MongoDB](https://img.shields.io/badge/MongoDB-7.x-47A248?style=for-the-badge&logo=mongodb&logoColor=white)](https://www.mongodb.com)
[![JWT](https://img.shields.io/badge/JWT-Auth-FB015B?style=for-the-badge&logo=jsonwebtokens&logoColor=white)](https://jwt.io)
[![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)](LICENSE)

---

[ğŸš€ Quick Start](#-quick-start) &nbsp;â€¢&nbsp; [ğŸ—ï¸ Architecture](#%EF%B8%8F-system-architecture) &nbsp;â€¢&nbsp; [ğŸ“¡ API Docs](#-api-reference) &nbsp;â€¢&nbsp; [ğŸ—„ï¸ Database](#%EF%B8%8F-database-design) &nbsp;â€¢&nbsp; [ğŸ” Auth Flow](#-authentication-system) &nbsp;â€¢&nbsp; [ğŸ›¡ï¸ Security](#%EF%B8%8F-security-checklist)

</div>

---

## ğŸ“– Table of Contents

| Section | Description |
|---------|-------------|
| [âœ¨ Features](#-features) | What BloodConnection can do |
| [ğŸ—ï¸ Architecture](#%EF%B8%8F-system-architecture) | High-level system design |
| [ğŸ’» Tech Stack](#-tech-stack) | All technologies used |
| [ğŸ” Authentication](#-authentication-system) | Auth flows & OTP mechanism |
| [ğŸ©¸ Core Domain Flows](#-core-domain-flows) | Donor, request & event flows |
| [ğŸ“¡ API Reference](#-api-reference) | All REST endpoints |
| [ğŸ—„ï¸ Database Design](#%EF%B8%8F-database-design) | Schemas & relationships |
| [ğŸ“ Project Structure](#-project-structure) | File & folder layout |
| [ğŸš€ Quick Start](#-quick-start) | Run the project locally |
| [âš™ï¸ Configuration](#%EF%B8%8F-environment-configuration) | Environment variables |
| [ğŸ›¡ï¸ Security Checklist](#%EF%B8%8F-security-checklist) | Production readiness |
| [ğŸ”® Roadmap](#-future-enhancements) | Planned features |

---

## âœ¨ Features

<div align="center">

| ğŸ” Authentication | ğŸ©¸ Donor Management | ğŸ¥ Blood Requests | ğŸ“… Events |
|:-----------------:|:-------------------:|:-----------------:|:---------:|
| Email + Password Login | Register as donor | Submit blood requests | Create donation drives |
| OTP via Email / Phone | Search & filter donors | Track urgency levels | List upcoming events |
| JWT Token (7-day expiry) | Manage availability status | Hospital contact info | Location & date tracking |
| Secure bcrypt hashing | Reward points system | Blood type matching | Admin event deletion |

</div>

### ğŸ¨ Frontend Highlights

- âš¡ **Blazing fast** â€” Vite 6 with SWC compiler for instant HMR
- ğŸ¨ **Beautiful UI** â€” 25+ Radix UI primitives styled with Tailwind CSS
- ğŸï¸ **Smooth animations** â€” Framer Motion & motion library
- ğŸ“Š **Data visualization** â€” Recharts with D3 under the hood
- ğŸ“ **Form handling** â€” React Hook Form 7.55 with validation
- ğŸŒ™ **Dark / Light mode** â€” next-themes 0.4.6
- ğŸ”” **Toast notifications** â€” Sonner
- ğŸ¹ **Command palette** â€” cmdk
- ğŸ“¥ **Drawer component** â€” Vaul
- ğŸ”¢ **OTP input** â€” input-otp

### âš™ï¸ Backend Highlights

- ğŸ›¡ï¸ **Secure auth** â€” JWT (7-day) + bcryptjs password hashing
- ğŸ“§ **Email OTPs** â€” Nodemailer with Gmail SMTP
- ğŸ—„ï¸ **MongoDB ODM** â€” Mongoose 7 with schema validation
- ğŸŒ **CORS ready** â€” Pre-configured for cross-origin requests
- ğŸ”„ **Dev server** â€” nodemon for hot reload

---

## ğŸ—ï¸ System Architecture

```mermaid
graph TB
    classDef frontend fill:#0d1b2a,stroke:#61DAFB,color:#61DAFB
    classDef backend fill:#0d1b2a,stroke:#68D391,color:#68D391
    classDef database fill:#0d1b2a,stroke:#48BB78,color:#48BB78
    classDef external fill:#0d1b2a,stroke:#F6AD55,color:#F6AD55

    subgraph FE["ğŸ–¥ï¸  FRONTEND  â€”  React 18 + Vite 6 + TypeScript"]
        direction LR
        UI["ğŸ¨ Radix UI\n+ Tailwind CSS"]
        Router["ğŸ”€ React Router\nClient Navigation"]
        Forms["ğŸ“ React Hook Form\nValidation & Submit"]
        Charts["ğŸ“Š Recharts\nData Visualisation"]
        Motion["ğŸï¸ Framer Motion\nAnimations"]
        Themes["ğŸŒ™ next-themes\nDark / Light Mode"]
    end

    subgraph BE["âš™ï¸  BACKEND  â€”  Node.js + Express 4.18"]
        direction LR
        Routes["ğŸ”€ Express Routes\n/api/auth\n/api/donors\n/api/requests\n/api/events"]
        MW["ğŸ›¡ï¸ Middleware\nCORS Â· JSON Parser"]
        CTRL["ğŸ® Controllers\nBusiness Logic"]
        JWT_MW["ğŸ”‘ JWT\nAuthentication"]
        UTIL["ğŸ”§ Utilities\nbcrypt Â· sendMail"]
    end

    subgraph DB["ğŸ—„ï¸  DATABASE  â€”  MongoDB + Mongoose 7"]
        direction LR
        Users[("ğŸ‘¤ Users")]
        Donors[("ğŸ©¸ Donors")]
        Requests[("ğŸ¥ Requests")]
        Events[("ğŸ“… Events")]
        OTPs[("ğŸ”‘ OTPs")]
    end

    subgraph EXT["ğŸ“¬  EXTERNAL SERVICES"]
        Gmail["ğŸ“§ Gmail SMTP\nNodemailer\nOTP Emails"]
        SMS["ğŸ“± SMS Provider\nPhone OTPs\n(configurable)"]
    end

    FE -->|"HTTP REST\nVITE_API_URL"| BE
    BE -->|"Mongoose ODM\nQueries"| DB
    BE -->|"Transactional\nNotifications"| EXT

    class FE frontend
    class BE backend
    class DB database
    class EXT external
```

---

## ğŸ’» Tech Stack

```mermaid
graph LR
    subgraph FRONTEND["âš›ï¸  Frontend"]
        direction TB
        R18["âš›ï¸ React 18.3.1"]
        TS["ğŸ”· TypeScript 5.x"]
        V6["âš¡ Vite 6.3.5"]
        SWC["ğŸ”¥ SWC Compiler\n@vitejs/plugin-react-swc"]
        RUI["ğŸ¨ Radix UI\n25+ Components"]
        TW["ğŸ’¨ Tailwind CSS"]
        FM["ğŸï¸ Framer Motion\nmotion v12"]
        RC["ğŸ“Š Recharts 2.15\n+ D3 libraries"]
        RHF["ğŸ“ React Hook Form 7.55"]
        NT["ğŸŒ™ next-themes 0.4.6"]
        LR["ğŸ”· lucide-react 0.487"]
        SON["ğŸ”” Sonner 2.0\nToast Notifications"]
        CMD["âŒ¨ï¸ cmdk 1.1\nCommand Palette"]
        VAUL["ğŸ“¥ Vaul 1.1\nDrawer Component"]
        OTP_I["ğŸ”¢ input-otp 1.4"]
        EMB["ğŸ  Embla Carousel 8.6"]
    end

    subgraph BACKEND["ğŸŸ¢  Backend"]
        direction TB
        NJ["ğŸŸ¢ Node.js â‰¥ 18"]
        EX["ğŸš‚ Express 4.18.2"]
        MG["ğŸƒ Mongoose 7.0.3"]
        JW["ğŸ”‘ jsonwebtoken 9.0"]
        BC["ğŸ”’ bcryptjs 2.4.3"]
        NM["ğŸ“§ Nodemailer 6.9.1"]
        DT["ğŸ“‹ dotenv 16.0.3"]
        CO["ğŸŒ cors 2.8.5"]
        ND["â™»ï¸ nodemon 2.0\nDev Hot-Reload"]
    end

    subgraph DATA["ğŸ—„ï¸  Data"]
        MON["ğŸƒ MongoDB"]
        ODM["Mongoose ODM\nSchema Validation"]
    end

    FRONTEND -->|"REST API Calls"| BACKEND
    BACKEND --> DATA
```

### ğŸ“¦ Complete Dependency Table

| Layer | Package | Version | Purpose |
|-------|---------|---------|---------|
| **Frontend** | react | 18.3.1 | Core UI library |
| | react-dom | 18.3.1 | DOM rendering |
| | vite | 6.3.5 | Build tool & dev server |
| | @vitejs/plugin-react-swc | 3.11.0 | SWC-powered React compilation |
| | typescript (types) | 5.x | Type safety |
| | @radix-ui/* (x25) | various | Accessible UI primitives |
| | tailwind-merge | 3.5.0 | Tailwind class merging |
| | clsx | 2.1.1 | Conditional class names |
| | class-variance-authority | 0.7.1 | Component variants |
| | framer-motion | 12.34.3 | Animation engine |
| | motion | 12.34.3 | Motion library wrapper |
| | recharts | 2.15.4 | Chart components |
| | lucide-react | 0.487.0 | Icon library (500+ icons) |
| | react-hook-form | 7.55.0 | Form state management |
| | next-themes | 0.4.6 | Theme switching |
| | sonner | 2.0.7 | Toast notifications |
| | cmdk | 1.1.1 | Command palette |
| | vaul | 1.1.2 | Drawer component |
| | input-otp | 1.4.2 | OTP input field |
| | embla-carousel-react | 8.6.0 | Carousel/slider |
| | react-day-picker | 8.10.1 | Date picker |
| | react-resizable-panels | 2.1.9 | Resizable panel layouts |
| **Backend** | express | 4.18.2 | HTTP server framework |
| | mongoose | 7.0.3 | MongoDB ODM |
| | jsonwebtoken | 9.0.0 | JWT creation & verification |
| | bcryptjs | 2.4.3 | Password hashing |
| | nodemailer | 6.9.1 | Email delivery |
| | cors | 2.8.5 | Cross-origin resource sharing |
| | dotenv | 16.0.3 | Environment variables |
| | nodemon | 2.0.22 | Dev auto-restart |

---

## ğŸ” Authentication System

### Dual-Mode Auth â€” Overview

```mermaid
graph LR
    USER(["ğŸ‘¤ User"]) --> CHOICE{{"Auth\nMethod?"}}

    CHOICE -->|"ğŸ“§ Password"| PW_FLOW["Password Flow\nregister â†’ login â†’ JWT"]
    CHOICE -->|"ğŸ“± OTP"| OTP_FLOW["OTP Flow\nsend-otp â†’ verify-otp â†’ JWT"]

    PW_FLOW --> JWT_ISSUED(["ğŸ”‘ JWT Token\n7-day expiry"])
    OTP_FLOW --> JWT_ISSUED

    JWT_ISSUED --> PROTECTED["ğŸ›¡ï¸ Access Protected\nEndpoints"]
```

### Complete Authentication Flowchart

```mermaid
flowchart TD
    START(["ğŸ‘¤ User Opens App"]) --> CHOICE{{"Choose\nAuth Method"}}

    CHOICE -->|"ğŸ“§ Email + Password"| REG_OR_LOGIN{{"Register\nor Login?"}}
    CHOICE -->|"ğŸ“± OTP Based"| OTP_SEND

    %% â”€â”€ Password Registration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    REG_OR_LOGIN -->|"New User"| REGISTER["ğŸ“® POST /api/auth/register
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Body: { name, email,
             password, phone }"]

    REGISTER --> VALIDATE_REG{{"Email\nalready exists?"}}
    VALIDATE_REG -->|"Yes âŒ"| ERR1[/"400 User already exists"\]
    VALIDATE_REG -->|"No âœ…"| HASH["ğŸ”’ bcrypt.genSalt(10)
    bcrypt.hash(password, salt)"]
    HASH --> SAVE_USER[("ğŸ’¾ Save User\nto MongoDB")]
    SAVE_USER --> SUCCESS_REG[/"âœ… 201 User Created"\]

    %% â”€â”€ Password Login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    REG_OR_LOGIN -->|"Returning User"| LOGIN["ğŸ“® POST /api/auth/login
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Body: { email, password }"]

    LOGIN --> FIND_USER{{"User\nfound?"}}
    FIND_USER -->|"No âŒ"| ERR2[/"400 Invalid Credentials"\]
    FIND_USER -->|"Yes âœ…"| CMP_PASS{{"bcrypt.compare\npass matches?"}}
    CMP_PASS -->|"Wrong âŒ"| ERR2
    CMP_PASS -->|"Match âœ…"| ISSUE_JWT

    %% â”€â”€ OTP Send â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    OTP_SEND["ğŸ“® POST /api/auth/send-otp
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Body: { phoneOrEmail }"]

    OTP_SEND --> GEN_CODE["ğŸ² Generate OTP
    Math.floor(100000 +
    Math.random()*900000)
    â†’ 6-digit string"]

    GEN_CODE --> STORE_OTP[("ğŸ’¾ Store OTP
    expiresAt: now + 5 min
    used: false")]

    STORE_OTP --> IS_EMAIL{{"Is email\naddress?"}}
    IS_EMAIL -->|"Yes ğŸ“§"| NODEMAILER["ğŸ“§ Nodemailer
    Gmail SMTP
    Send OTP email"]
    IS_EMAIL -->|"No ğŸ“±"| SMS_PROV["ğŸ“± SMS Provider
    Send OTP SMS"]

    NODEMAILER --> USER_RECEIVES["ğŸ“¬ User Receives\n6-Digit Code"]
    SMS_PROV --> USER_RECEIVES

    USER_RECEIVES --> VERIFY["ğŸ“® POST /api/auth/verify-otp
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Body: { phoneOrEmail, code }"]

    VERIFY --> FIND_OTP{{"Valid OTP\n& unused?"}}
    FIND_OTP -->|"No âŒ"| ERR3[/"400 Invalid OTP"\]
    FIND_OTP -->|"Yes âœ…"| CHECK_EXP{{"OTP expired?\n(> 5 min)"}}
    CHECK_EXP -->|"Yes âŒ"| ERR4[/"400 OTP Expired"\]
    CHECK_EXP -->|"No âœ…"| MARK_USED["âœï¸ Mark OTP\nused: true"]
    MARK_USED --> UPSERT["ğŸ” Find or Create\nUser record"]
    UPSERT --> ISSUE_JWT

    %% â”€â”€ JWT Issuance â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ISSUE_JWT["ğŸ”‘ jwt.sign()
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Payload: { id, email }
    Secret: JWT_SECRET
    Expiry: 7 days"]

    ISSUE_JWT --> AUTH_DONE(["âœ… Authenticated!
    Token returned to client"])

    style START fill:#1a1a2e,color:#e0e0e0,stroke:#61DAFB
    style AUTH_DONE fill:#0d4f2e,color:#68D391,stroke:#48BB78
    style ISSUE_JWT fill:#7b3f00,color:#F6AD55,stroke:#ED8936
    style ERR1 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style ERR2 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style ERR3 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style ERR4 fill:#4a0000,color:#FC8181,stroke:#E53E3E
```

---

## ğŸ©¸ Core Domain Flows

### Donor Management

```mermaid
flowchart LR
    subgraph ROUTES["ğŸ“¡ REST Endpoints â€” /api/donors"]
        direction TB
        R1["POST /\nâ• Create donor"]
        R2["GET /\nğŸ“‹ List all donors"]
        R3["GET /:id\nğŸ” Get single donor"]
        R4["PUT /:id\nâœï¸ Update donor"]
        R5["DELETE /:id\nğŸ—‘ï¸ Remove donor"]
    end

    subgraph CTRL["ğŸ® donorController.js"]
        direction TB
        C1["createDonor()\nâ†’ new Donor(body).save()\nâ†’ 201 response"]
        C2["getDonors()\nâ†’ Donor.find()\nâ†’ sort: createdAt desc"]
        C3["getDonor()\nâ†’ Donor.findById(id)\nâ†’ 404 if not found"]
        C4["updateDonor()\nâ†’ findByIdAndUpdate\nâ†’ { new: true }"]
        C5["deleteDonor()\nâ†’ findByIdAndDelete\nâ†’ { message: 'Deleted' }"]
    end

    subgraph SCHEMA["ğŸ—‚ï¸ Donor Document"]
        direction TB
        S1["name âœ… required: String"]
        S2["bloodType âœ… required: String"]
        S3["phone: String"]
        S4["email: String"]
        S5["city: String"]
        S6["lastDonationDate: Date"]
        S7["available: Boolean â€” default: true"]
        S8["rewardPoints: Number â€” default: 0"]
        S9["createdAt: Date â€” default: now"]
    end

    R1 --> C1 --> SCHEMA
    R2 --> C2 --> SCHEMA
    R3 --> C3 --> SCHEMA
    R4 --> C4 --> SCHEMA
    R5 --> C5 --> SCHEMA
```

---

### Blood Request Lifecycle

```mermaid
stateDiagram-v2
    direction LR

    [*] --> Submitted : "ğŸ¥ POST /api/requests\nhospital submits"

    state Submitted {
        [*] --> Validated : Schema check âœ…
        Validated --> [*]
    }

    Submitted --> Active : "Saved to MongoDB"

    state Active {
        [*] --> Low : ğŸŸ¢ Low Urgency
        Low --> Medium : Escalate
        Medium --> High : ğŸ”´ High Urgency
    }

    Active --> Matched : "ğŸ©¸ Compatible donor\nfound & contacted"
    Active --> Expired : "â° Time window\npassed, no donor"

    state Matched {
        [*] --> DonorContacted
        DonorContacted --> DonationScheduled
        DonationScheduled --> [*]
    }

    Matched --> Completed : "âœ… Donation done"
    Completed --> [*] : "DELETE /api/requests/:id"
    Expired --> [*] : "DELETE /api/requests/:id"

    note right of Active
        Request fields:
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        hospitalName âœ…
        bloodTypeNeeded âœ…
        units (default: 1)
        urgency: Low|Medium|High
        city
        contact
        createdAt
    end note
```

---

### Event Management â€” Sequence Diagram

```mermaid
sequenceDiagram
    actor ğŸ‘¨â€ğŸ’¼ Admin
    participant ğŸ–¥ï¸ Frontend as ğŸ–¥ï¸ Frontend<br/>(React)
    participant âš™ï¸ Backend as âš™ï¸ Backend<br/>(Express)
    participant ğŸ—„ï¸ MongoDB

    rect rgb(13, 27, 42)
        Note over ğŸ‘¨â€ğŸ’¼ Admin,ğŸ—„ï¸ MongoDB: â•  CREATE EVENT
        ğŸ‘¨â€ğŸ’¼ Admin->>ğŸ–¥ï¸ Frontend: Fill event form & submit
        ğŸ–¥ï¸ Frontend->>âš™ï¸ Backend: POST /api/events<br/>{ title, description, location, date }
        âš™ï¸ Backend->>ğŸ—„ï¸ MongoDB: new Event(body).save()
        ğŸ—„ï¸ MongoDB-->>âš™ï¸ Backend: Event document âœ…
        âš™ï¸ Backend-->>ğŸ–¥ï¸ Frontend: 201 Created + Event JSON
        ğŸ–¥ï¸ Frontend-->>ğŸ‘¨â€ğŸ’¼ Admin: âœ… Toast "Event created"
    end

    rect rgb(10, 31, 15)
        Note over ğŸ‘¨â€ğŸ’¼ Admin,ğŸ—„ï¸ MongoDB: ğŸ“‹  LIST EVENTS (sorted by date)
        ğŸ‘¨â€ğŸ’¼ Admin->>ğŸ–¥ï¸ Frontend: Navigate to Events page
        ğŸ–¥ï¸ Frontend->>âš™ï¸ Backend: GET /api/events
        âš™ï¸ Backend->>ğŸ—„ï¸ MongoDB: Event.find().sort({ date: 1 })
        ğŸ—„ï¸ MongoDB-->>âš™ï¸ Backend: Sorted events array
        âš™ï¸ Backend-->>ğŸ–¥ï¸ Frontend: 200 OK + [ ...events ]
        ğŸ–¥ï¸ Frontend-->>ğŸ‘¨â€ğŸ’¼ Admin: Renders chronological event cards
    end

    rect rgb(42, 13, 13)
        Note over ğŸ‘¨â€ğŸ’¼ Admin,ğŸ—„ï¸ MongoDB: ğŸ—‘ï¸  DELETE EVENT
        ğŸ‘¨â€ğŸ’¼ Admin->>ğŸ–¥ï¸ Frontend: Click delete on event card
        ğŸ–¥ï¸ Frontend->>âš™ï¸ Backend: DELETE /api/events/:id
        âš™ï¸ Backend->>ğŸ—„ï¸ MongoDB: Event.findByIdAndDelete(id)
        ğŸ—„ï¸ MongoDB-->>âš™ï¸ Backend: Acknowledged âœ…
        âš™ï¸ Backend-->>ğŸ–¥ï¸ Frontend: { message: "Deleted" }
        ğŸ–¥ï¸ Frontend-->>ğŸ‘¨â€ğŸ’¼ Admin: Event removed from list
    end
```

---

## ğŸ“¡ API Reference

### Base URL

```
Development:   http://localhost:5000
Production:    https://your-api-domain.com
```

### Complete API Mind Map

```mermaid
mindmap
  root(("ğŸ©¸
BloodConnection
  REST API"))
    ğŸ” /api/auth
      POST /register
        name Â· email
        password Â· phone
        Returns 201
      POST /login
        email Â· password
        Returns JWT token
      POST /send-otp
        phoneOrEmail
        6-digit Â· 5 min
        âš ï¸ code in dev only
      POST /verify-otp
        phoneOrEmail Â· code
        Returns JWT token
    ğŸ©¸ /api/donors
      POST /
        Create donor
        name + bloodType required
      GET /
        All donors
        Sort: newest first
      GET /:id
        Single donor
        404 if not found
      PUT /:id
        Update donor
        Partial update ok
      DELETE /:id
        Hard delete
    ğŸ¥ /api/requests
      POST /
        Create request
        hospital + bloodType required
      GET /
        All requests
        Sort: newest first
      DELETE /:id
        Close request
    ğŸ“… /api/events
      POST /
        Create event
        title required
      GET /
        All events
        Sort: date ascending
      DELETE /:id
        Remove event
```

### Auth Endpoints

| Method | Endpoint | Request Body | Response | Notes |
|--------|----------|-------------|----------|-------|
| `POST` | `/api/auth/register` | `{ name, email, password, phone? }` | `201 { message }` | Hashes password with bcrypt |
| `POST` | `/api/auth/login` | `{ email, password }` | `200 { token, user }` | Returns 7-day JWT |
| `POST` | `/api/auth/send-otp` | `{ phoneOrEmail }` | `200 { message, code* }` | *code visible in dev only |
| `POST` | `/api/auth/verify-otp` | `{ phoneOrEmail, code }` | `200 { token }` | Marks OTP as used |

### Donor Endpoints

| Method | Endpoint | Body | Response | Description |
|--------|----------|------|----------|-------------|
| `POST` | `/api/donors` | Donor object | `201 donor` | Create donor |
| `GET` | `/api/donors` | â€” | `200 [donors]` | All donors, newest first |
| `GET` | `/api/donors/:id` | â€” | `200 donor` | Single donor by ID |
| `PUT` | `/api/donors/:id` | Partial donor | `200 donor` | Update donor fields |
| `DELETE` | `/api/donors/:id` | â€” | `200 { message }` | Delete donor |

### Request Endpoints

| Method | Endpoint | Body | Response | Description |
|--------|----------|------|----------|-------------|
| `POST` | `/api/requests` | `{ hospitalName, bloodTypeNeeded, units?, urgency?, city?, contact? }` | `201 request` | Submit blood request |
| `GET` | `/api/requests` | â€” | `200 [requests]` | All requests, newest first |
| `DELETE` | `/api/requests/:id` | â€” | `200 { message }` | Close/delete request |

### Event Endpoints

| Method | Endpoint | Body | Response | Description |
|--------|----------|------|----------|-------------|
| `POST` | `/api/events` | `{ title, description?, location?, date? }` | `201 event` | Create event |
| `GET` | `/api/events` | â€” | `200 [events]` | All events, by date asc |
| `DELETE` | `/api/events/:id` | â€” | `200 { message }` | Delete event |

---

## ğŸ—„ï¸ Database Design

### Entity Relationship Diagram

```mermaid
erDiagram
    USER {
        ObjectId  _id         PK  "Auto-generated"
        String    name            "Display name"
        String    email       UK  "Unique Â· required"
        String    passwordHash    "bcrypt(10 rounds)"
        String    phone           "Optional"
        String    role            "user or admin"
        Date      createdAt       "Default: Date.now"
    }

    OTP {
        ObjectId  _id           PK  "Auto-generated"
        String    phoneOrEmail      "Lookup key"
        String    code              "6-digit string"
        Date      expiresAt         "now + 5 minutes"
        Boolean   used              "Default: false"
    }

    DONOR {
        ObjectId  _id               PK  "Auto-generated"
        String    name                   "Required"
        String    bloodType              "Required: A+ B+ O- etc"
        String    phone                  "Contact number"
        String    email                  "Contact email"
        String    city                   "Donor location"
        Date      lastDonationDate       "Eligibility check"
        Boolean   available              "Default: true"
        Number    rewardPoints           "Default: 0"
        Date      createdAt              "Default: Date.now"
    }

    REQUEST {
        ObjectId  _id               PK  "Auto-generated"
        String    hospitalName           "Required"
        String    bloodTypeNeeded        "Required: A+ B- O+ etc"
        Number    units                  "Default: 1"
        String    urgency                "Low | Medium | High"
        String    city                   "Hospital location"
        String    contact                "Phone or email"
        Date      createdAt              "Default: Date.now"
    }

    EVENT {
        ObjectId  _id          PK  "Auto-generated"
        String    title             "Required"
        String    description       "Event details"
        String    location          "Venue address"
        Date      date              "Event date/time"
        Date      createdAt         "Default: Date.now"
    }

    USER ||--o{ OTP       : "generates per login attempt"
    DONOR }o--o{ REQUEST  : "blood type compatibility"
```

### Blood Type Compatibility

```mermaid
graph TD
    subgraph UNIVERSAL["â­ Special Types"]
        ON["ğŸŒŸ Oâˆ’\nUniversal Donor\nDonates to ALL 8 types"]
        ABP["ğŸ‘‘ AB+\nUniversal Recipient\nReceives from ALL 8 types"]
    end

    subgraph POSITIVE["ğŸ”´ Positive Types"]
        OP["O+"] -->|gives to| OPR["O+ Â· A+ Â· B+ Â· AB+"]
        AP["A+"] -->|gives to| APR["A+ Â· AB+"]
        BP["B+"] -->|gives to| BPR["B+ Â· AB+"]
        ABP2["AB+"] -->|gives to| ABPR["AB+ only"]
    end

    subgraph NEGATIVE["ğŸ”µ Negative Types"]
        AN["Aâˆ’"] -->|gives to| ANR["Aâˆ’ Â· A+ Â· ABâˆ’ Â· AB+"]
        BN["Bâˆ’"] -->|gives to| BNR["Bâˆ’ Â· B+ Â· ABâˆ’ Â· AB+"]
        ABN["ABâˆ’"] -->|gives to| ABNR["ABâˆ’ Â· AB+"]
    end

    ON -->|gives to| ALLR["All 8 blood types"]

    style ON fill:#0d4f2e,color:#68D391,stroke:#48BB78
    style ABP fill:#3d1a4f,color:#D6BCFA,stroke:#9F7AEA
```

---

## ğŸ“ Project Structure

```mermaid
graph TD
    classDef root fill:#1a1a2e,stroke:#e94560,color:#e94560,font-weight:bold
    classDef folder fill:#0f3460,stroke:#e94560,color:#93C5FD
    classDef file fill:#16213e,stroke:#0f3460,color:#A8B2D8
    classDef important fill:#533483,stroke:#e94560,color:#F3E8FF,font-weight:bold

    ROOT["ğŸ“ bloodconnection-fullstack/"]:::root

    ROOT --> FE["ğŸ“ frontend/"]:::folder
    ROOT --> BE["ğŸ“ backend/"]:::folder
    ROOT --> README_F["ğŸ“„ README.md"]:::file
    ROOT --> GI["ğŸ“„ .gitignore"]:::file

    %% â”€â”€ Frontend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    FE --> FE_SRC["ğŸ“ src/"]:::folder
    FE --> FE_IDX["ğŸ“„ index.html\nApp HTML shell"]:::file
    FE --> FE_PKG["ğŸ“„ package.json\n25+ UI dependencies"]:::important
    FE --> FE_VITE["ğŸ“„ vite.config.ts\nPort 3000 Â· path aliases"]:::important

    FE_SRC --> FE_MAIN["ğŸ“„ main.tsx\nReact 18 createRoot entry"]:::important
    FE_SRC --> FE_APP["ğŸ“„ App.tsx\nRoot component"]:::important
    FE_SRC --> FE_COMP["ğŸ“ components/\nReusable UI components"]:::folder
    FE_SRC --> FE_PAGES["ğŸ“ pages/\nRoute views"]:::folder
    FE_SRC --> FE_HOOKS["ğŸ“ hooks/\nCustom React hooks"]:::folder
    FE_SRC --> FE_LIB["ğŸ“ lib/\nutilstn, helpers"]:::folder

    %% â”€â”€ Backend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    BE --> BE_SERVER["ğŸ“„ server.js\nExpress init + MongoDB connect"]:::important
    BE --> BE_PKG["ğŸ“„ package.json\nNode dependencies"]:::important
    BE --> BE_ENV["ğŸ“„ .env.example\nEnvironment template"]:::important
    BE --> BE_ROUTES["ğŸ“ routes/"]:::folder
    BE --> BE_CTRL["ğŸ“ controllers/"]:::folder
    BE --> BE_MODELS["ğŸ“ models/"]:::folder
    BE --> BE_UTILS["ğŸ“ utils/"]:::folder

    %% Routes
    BE_ROUTES --> BR1["ğŸ“„ auth.js\n4 endpoints"]:::file
    BE_ROUTES --> BR2["ğŸ“„ donors.js\n5 endpoints"]:::file
    BE_ROUTES --> BR3["ğŸ“„ requests.js\n3 endpoints"]:::file
    BE_ROUTES --> BR4["ğŸ“„ events.js\n3 endpoints"]:::file

    %% Controllers
    BE_CTRL --> BC1["ğŸ“„ authController.js\nregister Â· login\nsend-otp Â· verify-otp"]:::important
    BE_CTRL --> BC2["ğŸ“„ donorController.js\nFull CRUD"]:::file
    BE_CTRL --> BC3["ğŸ“„ requestController.js\nCreate Â· List Â· Delete"]:::file
    BE_CTRL --> BC4["ğŸ“„ eventController.js\nCreate Â· List Â· Delete"]:::file

    %% Models
    BE_MODELS --> BM1["ğŸ“„ User.js\nname Â· email Â· role"]:::file
    BE_MODELS --> BM2["ğŸ“„ Donor.js\nbloodType Â· rewardPoints"]:::file
    BE_MODELS --> BM3["ğŸ“„ Request.js\nhospital Â· urgency"]:::file
    BE_MODELS --> BM4["ğŸ“„ Event.js\ntitle Â· date Â· location"]:::file
    BE_MODELS --> BM5["ğŸ“„ Otp.js\ncode Â· expiry Â· used"]:::file

    %% Utils
    BE_UTILS --> BU1["ğŸ“„ sendMail.js\nNodemailer Gmail SMTP"]:::file
```

### Quick File Reference

| File | Role |
|------|------|
| `backend/server.js` | Express app boot, MongoDB connect, route mounting |
| `backend/routes/auth.js` | POST register Â· login Â· send-otp Â· verify-otp |
| `backend/routes/donors.js` | Full CRUD: GET/POST/PUT/DELETE donors |
| `backend/routes/requests.js` | POST/GET/DELETE blood requests |
| `backend/routes/events.js` | POST/GET/DELETE donation events |
| `backend/controllers/authController.js` | register, login, sendOtp, verifyOtp logic |
| `backend/controllers/donorController.js` | createDonor, getDonors, getDonor, updateDonor, deleteDonor |
| `backend/controllers/requestController.js` | createRequest, getRequests, deleteRequest |
| `backend/controllers/eventController.js` | createEvent, getEvents, deleteEvent |
| `backend/models/User.js` | Schema: name, email(unique), passwordHash, phone, role |
| `backend/models/Donor.js` | Schema: bloodType(req), available, rewardPoints |
| `backend/models/Request.js` | Schema: hospitalName(req), bloodTypeNeeded(req), urgency |
| `backend/models/Event.js` | Schema: title(req), description, location, date |
| `backend/models/Otp.js` | Schema: code, expiresAt, used (boolean flag) |
| `backend/utils/sendMail.js` | Nodemailer Gmail transport, graceful skip if unconfigured |
| `frontend/vite.config.ts` | Vite 6 config, port 3000, `@` alias â†’ `./src`, version aliases |
| `frontend/index.html` | HTML shell, mounts `<div id="root">` |

---

## ğŸš€ Quick Start

### Prerequisites Check

```mermaid
graph LR
    A["âœ… Node.js â‰¥ 18\nnodejs.org/download"] --> C
    B["âœ… MongoDB\nlocal or Atlas"] --> C
    C["Clone Repo"] --> D["Setup Backend"]
    D --> E["Setup Frontend"]
    E --> F["ğŸ‰ App running\nlocalhost:3000"]
```

### Step 1 â€” Clone

```bash
git clone https://github.com/your-username/bloodconnection.git
cd bloodconnection
```

### Step 2 â€” Backend Setup

```bash
cd backend

# Copy and configure environment
cp .env.example .env
# Edit .env â€” see Configuration section below

# Install all dependencies
npm install

# Start dev server (nodemon, auto-restarts)
npm run dev

# âœ… Running on http://localhost:5000
```

### Step 3 â€” Frontend Setup

```bash
# Open a new terminal tab
cd frontend

# Create frontend env
echo "VITE_API_URL=http://localhost:5000" > .env

# Install all dependencies
npm install

# Start dev server (Vite HMR)
npm run dev

# âœ… App opens at http://localhost:3000
```

### Step 4 â€” Verify the Stack

```mermaid
sequenceDiagram
    participant You
    participant Browser
    participant Backend
    participant MongoDB

    You->>Browser: Open http://localhost:3000
    Browser-->>You: âœ… React app renders

    You->>Backend: curl http://localhost:5000/api/donors
    Backend->>MongoDB: Donor.find()
    MongoDB-->>Backend: []
    Backend-->>You: âœ… 200 [] â€” Stack working!
```

### Available Scripts

| Location | Command | Effect |
|----------|---------|--------|
| `backend/` | `npm run dev` | Start with nodemon (hot reload) |
| `backend/` | `npm start` | Start with node (production) |
| `frontend/` | `npm run dev` | Vite dev server on port 3000 |
| `frontend/` | `npm run build` | Production build â†’ `build/` folder |

### Port Reference

| Service | URL | Description |
|---------|-----|-------------|
| ğŸ–¥ï¸ Frontend | http://localhost:3000 | Vite dev server |
| âš™ï¸ Backend | http://localhost:5000 | Express API server |
| ğŸ—„ï¸ MongoDB | mongodb://localhost:27017 | Local MongoDB |

---

## âš™ï¸ Environment Configuration

### `backend/.env`

```env
# â”€â”€â”€ Server â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PORT=5000

# â”€â”€â”€ MongoDB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Local development:
MONGO_URI=mongodb://localhost:27017/bloodconnection

# MongoDB Atlas (cloud/production):
# MONGO_URI=mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/bloodconnection

# â”€â”€â”€ JWT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš ï¸ CHANGE THIS in production! Use a 64+ char random string.
JWT_SECRET=change_this_to_a_very_long_random_secret_in_production

# â”€â”€â”€ Email OTP (optional) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Required only if you want OTP emails to actually send.
# Use a Gmail App Password (not your regular Gmail password).
EMAIL_USER=your_gmail_address@gmail.com
EMAIL_PASS=your_gmail_app_password_here
```

### `frontend/.env`

```env
# â”€â”€â”€ API Base URL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
VITE_API_URL=http://localhost:5000

# For production deployment:
# VITE_API_URL=https://api.your-bloodconnection-domain.com
```

### Variable Reference

| Variable | Where | Required | Default | Description |
|----------|-------|----------|---------|-------------|
| `PORT` | backend | âœ… | `5000` | Express server port |
| `MONGO_URI` | backend | âœ… | â€” | Full MongoDB connection string |
| `JWT_SECRET` | backend | âœ… | `"secret"` | JWT signing key â€” **change in prod!** |
| `EMAIL_USER` | backend | âš ï¸ | â€” | Gmail address for sending OTPs |
| `EMAIL_PASS` | backend | âš ï¸ | â€” | Gmail App Password |
| `VITE_API_URL` | frontend | âœ… | â€” | Backend URL for API calls |

---

## ğŸ›¡ï¸ Security Checklist

```mermaid
graph TD
    PROD(["ğŸš€ Going to Production?"]) --> S1 & S2 & S3 & S4 & S5 & S6 & S7 & S8 & S9 & S10

    S1["ğŸ”´ CRITICAL\nRemove OTP code from\nsend-otp API response"]
    S2["ğŸ”´ CRITICAL\nReplace JWT_SECRET with\n64+ char random string"]
    S3["ğŸ”´ CRITICAL\nForce HTTPS / SSL\non your domain"]
    S4["ğŸŸ¡ IMPORTANT\nWhitelist origins in\nCORS configuration"]
    S5["ğŸŸ¡ IMPORTANT\nRate-limit auth endpoints\nexpress-rate-limit"]
    S6["ğŸŸ¡ IMPORTANT\nAdd JWT middleware\nto protect write routes"]
    S7["ğŸŸ¡ IMPORTANT\nUse MongoDB Atlas\nwith IP whitelisting"]
    S8["ğŸŸ¡ IMPORTANT\nUse Gmail App Password\nnot your main password"]
    S9["ğŸŸ¢ RECOMMENDED\nIntegrate real SMS\nTwilio / AWS SNS"]
    S10["ğŸŸ¢ RECOMMENDED\nAdd input sanitization\nexpress-validator"]

    style S1 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style S2 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style S3 fill:#4a0000,color:#FC8181,stroke:#E53E3E
    style S4 fill:#4a2200,color:#FBD38D,stroke:#ED8936
    style S5 fill:#4a2200,color:#FBD38D,stroke:#ED8936
    style S6 fill:#4a2200,color:#FBD38D,stroke:#ED8936
    style S7 fill:#4a2200,color:#FBD38D,stroke:#ED8936
    style S8 fill:#4a2200,color:#FBD38D,stroke:#ED8936
    style S9 fill:#0d2d0d,color:#9AE6B4,stroke:#48BB78
    style S10 fill:#0d2d0d,color:#9AE6B4,stroke:#48BB78
```

| Priority | Check | Action |
|----------|-------|--------|
| ğŸ”´ Critical | OTP code in response | Remove from `sendOtp` controller |
| ğŸ”´ Critical | Weak JWT secret | Generate with `node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"` |
| ğŸ”´ Critical | HTTP in production | Configure SSL certificate |
| ğŸŸ¡ Important | CORS wildcard `*` | Replace with `origin: ['https://your-domain.com']` |
| ğŸŸ¡ Important | No rate limiting | `npm install express-rate-limit` |
| ğŸŸ¡ Important | Unprotected writes | Add `verifyToken` middleware to POST/PUT/DELETE routes |
| ğŸŸ¡ Important | Local MongoDB | Migrate to MongoDB Atlas |
| ğŸŸ¢ Recommended | Demo SMS | Integrate Twilio or AWS SNS |
| ğŸŸ¢ Recommended | No validation | Add `express-validator` |

---

## ğŸ”® Future Enhancements

```mermaid
graph LR
    NOW["ğŸŸ¢ v1.0\nCurrent"] --> V2["ğŸ”µ v2.0\nPlanned"] --> V3["ğŸŸ£ v3.0\nRoadmap"]

    subgraph C["âœ… v1.0 â€” Shipped"]
        C1["Donor CRUD"]
        C2["Blood Requests"]
        C3["Event Management"]
        C4["JWT Auth"]
        C5["OTP Email/SMS"]
        C6["Reward Points"]
    end

    subgraph P["ğŸ”µ v2.0 â€” Planned"]
        P1["âš¡ Real-time Notifications\nSocket.io"]
        P2["ğŸ—ºï¸ Map Integration\nGoogle Maps API"]
        P3["ğŸ“± Push Notifications\nFCM"]
        P4["ğŸ“Š Admin Dashboard\nAnalytics & Stats"]
        P5["ğŸ” Advanced Search\nBlood type + location filter"]
        P6["ğŸ“§ Email Templates\nHTML email designs"]
    end

    subgraph R["ğŸŸ£ v3.0 â€” Roadmap"]
        R1["ğŸ“± Mobile App\nReact Native"]
        R2["ğŸ¤– AI Donor Matching\nML-powered suggestions"]
        R3["â›“ï¸ Blockchain Records\nImmutable donation history"]
        R4["ğŸŒ Multilanguage\ni18n support"]
        R5["ğŸ† Gamification\nLeaderboards & badges"]
    end
```

---

## ğŸ¤ Contributing

```bash
# 1. Fork the repository on GitHub

# 2. Clone your fork
git clone https://github.com/your-username/bloodconnection.git

# 3. Create a feature branch
git checkout -b feature/your-feature-name

# 4. Make your changes & commit
git add .
git commit -m "feat: add your feature description"

# 5. Push your branch
git push origin feature/your-feature-name

# 6. Open a Pull Request on GitHub
```

**Commit Message Convention:**

| Prefix | Use for |
|--------|---------|
| `feat:` | New features |
| `fix:` | Bug fixes |
| `docs:` | Documentation only |
| `style:` | Formatting changes |
| `refactor:` | Code restructuring |
| `test:` | Adding/fixing tests |

---

## ğŸ“„ License

```
MIT License â€” Copyright (c) 2024 BloodConnection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files, to deal in the Software
without restriction, including without limitation the rights to use, copy,
modify, merge, publish, distribute, sublicense, and/or sell copies of the
Software, and to permit persons to whom the Software is furnished to do so.
```

---

<div align="center">

---

**ğŸ©¸ BloodConnection**

*Built with â¤ï¸ to connect donors with those in need.*

*Every connection made here could save a life.*

---

[![Stars](https://img.shields.io/github/stars/your-username/bloodconnection?style=social)](https://github.com/your-username/bloodconnection)
[![Forks](https://img.shields.io/github/forks/your-username/bloodconnection?style=social)](https://github.com/your-username/bloodconnection)
[![Issues](https://img.shields.io/github/issues/your-username/bloodconnection?style=social)](https://github.com/your-username/bloodconnection/issues)

*Connecting Lives. Saving Futures.* ğŸ©¸

</div>
